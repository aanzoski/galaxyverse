<!--Jordan is hella K -->
<!--Its a joke daddy -->

<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Relic</title>
  <script src="assets/js/pre.js" defer></script>
  <link rel="icon" href="others/assets/relic.webp" />

  <!-- external ceeeses -->
  <link rel="stylesheet" href="./styles.css" />

  <!-- Sidebar ceeeses -->
  <link rel="stylesheet" href="./others/assets/css/sidebar.css" />

  <!-- Console ceeeses -->
  <link rel="stylesheet" href="./others/assets/css/console.css" />

  <!-- Homepage CSS -->
  <link rel="stylesheet" href="./others/assets/scripts/homepage/css/homepage.css" />

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@100..900&display=swap" rel="stylesheet" />
  
  <style>
    /* Proxy Browser Styles */
    .proxy-browser-container {
      display: flex;
      flex-direction: column;
      height: calc(100vh - 100px);
      background: var(--bg-color, #0f1419);
      border-radius: 12px;
      overflow: hidden;
      margin: 20px;
    }

    .proxy-header {
      background: rgba(255, 255, 255, 0.05);
      padding: 15px 20px;
      display: flex;
      align-items: center;
      gap: 10px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }

    .proxy-nav-btn {
      background: rgba(255, 255, 255, 0.1);
      border: none;
      color: white;
      padding: 8px 12px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 16px;
      transition: background 0.3s;
      min-width: 40px;
    }

    .proxy-nav-btn:hover {
      background: rgba(255, 255, 255, 0.2);
    }

    .proxy-nav-btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    .proxy-url-bar {
      flex: 1;
      display: flex;
      gap: 10px;
      align-items: center;
    }

    .proxy-url-input {
      flex: 1;
      padding: 12px 16px;
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 8px;
      color: white;
      font-size: 14px;
      outline: none;
      transition: all 0.3s;
    }

    .proxy-url-input::placeholder {
      color: rgba(255, 255, 255, 0.5);
    }

    .proxy-url-input:focus {
      background: rgba(255, 255, 255, 0.08);
      border-color: rgba(255, 255, 255, 0.3);
    }

    .proxy-go-btn {
      padding: 12px 24px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      border: none;
      color: white;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 600;
      transition: transform 0.2s;
    }

    .proxy-go-btn:hover {
      transform: scale(1.05);
    }

    .proxy-iframe-container {
      flex: 1;
      position: relative;
      background: #000;
    }

    .proxy-iframe {
      width: 100%;
      height: 100%;
      border: none;
    }

    .loading-indicator {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      color: white;
      font-size: 18px;
      display: none;
      z-index: 10;
    }

    .loading-indicator.active {
      display: block;
    }

    .proxy-welcome {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      text-align: center;
      color: white;
      z-index: 5;
    }

    .proxy-welcome h2 {
      font-size: 32px;
      margin-bottom: 10px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .proxy-welcome p {
      opacity: 0.7;
      font-size: 16px;
    }
  </style>
</head>

<body>

  <!-- Sidebar Navigation -->
  <div class="sidebar">
    <div class="sidebar-header">
      <div class="sidebar-logoforanzoml"> <link rel="icon" href="others/assets/relic.webp" /></div>
    </div>
    <nav class="sidebar-nav">
      <a href="#" class="sidebar-link active" id="homeLink" data-page="home" title="Home">
        <svg class="sidebar-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
          <polyline points="9 22 9 12 15 12 15 22"></polyline>
        </svg>
        <span>HœÉme</span>
      </a>
      <a href="#" class="sidebar-link" id="gameLink" data-page="games" title="Games">
        <svg class="sidebar-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <rect x="2" y="7" width="20" height="15" rx="2" ry="2"></rect>
          <polyline points="2 12 22 12"></polyline>
          <polyline points="7 7 7 22"></polyline>
          <polyline points="17 7 17 22"></polyline>
        </svg>
        <span>G·æ∞mes</span>
      </a>
      <a href="#" class="sidebar-link" id="searchLink" data-page="search" title="Search">
        <svg class="sidebar-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="11" cy="11" r="8"></circle>
          <path d="m21 21-4.35-4.35"></path>
        </svg>
        <span>Search</span>
      </a>
      <a href="#" class="sidebar-link" id="appsLink" data-page="apps" title="Shortcuts">
        <svg class="sidebar-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <rect x="3" y="3" width="7" height="7"></rect>
          <rect x="14" y="3" width="7" height="7"></rect>
          <rect x="14" y="14" width="7" height="7"></rect>
          <rect x="3" y="14" width="7" height="7"></rect>
        </svg>
        <span>Shortcuts</span>
      </a>
      <a href="#" class="sidebar-link" id="settingsLink" data-page="settings" title="Settings">
        <svg class="sidebar-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path
            d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z">
          </path>
          <circle cx="12" cy="12" r="3"></circle>
        </svg>
        <span>Settings</span>
      </a>
    </nav>
  </div>

  <!-- Main Content Area -->
  <div class="main-content">
    <!-- Credits Modal -->
    <div id="creditsModal" class="info-modal">
      <div class="info-modal-content">
        <span class="info-close" data-modal="creditsModal">&times;</span>
        <h2>Credits</h2>
        <div class="info-modal-body">
          <p><strong>Created by:</strong></p>
          <ul>
            <li>Aye-zee (aanzoski)</li>
            <li>Jordan (JustJxrdanWasDefinetlyTaken)</li>
            <li>Nived (First Developer)</li>
          </ul>

          <p><strong>Credits</strong></p>
          <ul>
            <li><a href="https://www.galaxyverse.org/" target="_blank" rel="noopener noreferrer">GalaxyVerse</a></li>
            <li><a href="https://github.com/JustJxrdanWasDefinetlyTaken" target="_blank"
                rel="noopener noreferrer">Jordan's Projects</a></li>
            <li><a href="https://gn-math.dev/" target="_blank" rel="noopener noreferrer">gn-math for some games</a></li>
          </ul>

          <p><strong>Contributors:</strong></p>
          <ul>
            <li>Michael</li>
            <li>David</li>
            <li>Dariel</li>
            <li>Joseluis</li>
            <li>Fabian</li>
          </ul>

          <p><strong>Project Info:</strong></p>
          <ul>
            <li>Best development team was here</li>
          </ul>
        </div>
      </div>
    </div>

    <!-- Update Log Modal -->
    <div id="updateLogModal" class="info-modal">
      <div class="info-modal-content">
        <span class="info-close" data-modal="updateLogModal">&times;</span>
        <h2>Update Log V1.2.3</h2>
        <div class="info-modal-body">
          <ul>
            <li>More and More games</li>
            <li>Revamped Search</li>
            <li>More apps</li>
          </ul>

          <h4>Coming Soon</h4>
          <ul>
            <li>More games</li>
          </ul>
        </div>
      </div>
    </div>

    <div class="container">
      <div id="content-home" class="content">
        <!-- Featured Section -->
        <div class="featured-section">
          <h2>üéÆ Welcome to Relic</h2>
          <p>Discover the best unblocked games here that you can find</p>
          <p style="font-size: 14px; opacity: 0.8; margin-top: 10px;">
            <b>No key system required.</b>
          </p>
        </div>

        <!-- Top Carousel - Scrolling Left to Right -->
        <div class="carousel-wrapper">
          <div class="games-carousel">
            <div class="carousel-track scroll-left-to-right" id="carousel-track-top">
              <!-- Game cards will be dynamically loaded here -->
            </div>
          </div>
        </div>

        <!-- Bottom Carousel - Scrolling Right to Left -->
        <div class="carousel-wrapper">
          <div class="games-carousel">
            <div class="carousel-track scroll-right-to-left" id="carousel-track-bottom">
              <!-- Game cards will be dynamically loaded here -->
            </div>
          </div>
        </div>

        <!-- Credits and Update Log buttons -->
        <div class="homepage-info-buttons">
          <button id="creditsBtn" class="info-btn">Credits</button>
          <button id="updateLogBtn" class="info-btn">Update Log</button>
        </div>
      </div>

      <!-- PROXY SEARCH SECTION - COMPLETELY REPLACED -->
      <div id="content-search" class="content" style="display:none;">
        <div class="proxy-browser-container">
          <div class="proxy-header">
            <button class="proxy-nav-btn" id="proxyBack" title="Back">‚óÄ</button>
            <button class="proxy-nav-btn" id="proxyForward" title="Forward">‚ñ∂</button>
            <button class="proxy-nav-btn" id="proxyReload" title="Reload">‚ü≥</button>
            
            <div class="proxy-url-bar">
              <input 
                type="text" 
                class="proxy-url-input" 
                id="proxyUrlInput" 
                placeholder="Search with confidence..."
              />
              <button class="proxy-go-btn" id="proxyGoBtn">Go</button>
            </div>

            <button class="proxy-nav-btn" id="proxyFullscreen" title="Fullscreen">‚õ∂</button>
          </div>

          <div class="proxy-iframe-container">
            <div class="proxy-welcome" id="proxyWelcome">
              <h2>üîç Proxy Browser</h2>
              <p>Enter a URL or search query to browse anonymously</p>
            </div>
            <div class="loading-indicator" id="loadingIndicator">Loading...</div>
            <iframe 
              id="proxyIframe" 
              class="proxy-iframe"
              sandbox="allow-scripts allow-same-origin allow-forms allow-popups allow-modals allow-popups-to-escape-sandbox"
              allowfullscreen
            ></iframe>
          </div>
        </div>
      </div>

      <div id="content-gms" class="content" style="display:none;">
        <h1>G·æ∞mes</h1>
        <div class="search-container">
          <input type="text" id="searchInput" placeholder="Search for games..." />
          <button id="searchBtn">Search</button>
        </div>
        <div id="game-list" class="game-grid">
          <!-- Game cards will be dynamically loaded here -->
        </div>
      </div>

      <div id="content-about" class="content" style="display:none;">
        <h2>About</h2>
        <h1>Latest Note: [11/17/25]</h1>
        <br>
        <h3>üîê New Fingerprint ID authentication system!</h3>
        <h3>üîë Key generator with special characters</h3>
        <h3>üõ°Ô∏è Manual key entry for enhanced security</h3>
      </div>

      <div id="content-aps" class="content" style="display:none;">
        <h1>Shortcuts</h1>
        <div id="app-list" class="app-grid">
          <!-- App cards will be dynamically loaded here -->
        </div>
        <button id="backToHomeApps">Back to Home</button>
      </div>

      <div id="content-settings" class="content" style="display:none;">
        <h1>Settings</h1>

        <div class="settings-page-container">
          <div class="settings-section">
            <h3>Tab Cloaking</h3>
            <div class="setting-item">
              <label for="customTitle">Custom Title:</label>
              <input type="text" id="customTitle" placeholder="e.g., Google" />
            </div>
            <div class="setting-item">
              <label for="customFavicon">Custom Favicon URL:</label>
              <input type="text" id="customFavicon" placeholder="e.g., https://google.com/favicon.ico" />
            </div>
            <div class="setting-item">
              <label for="presetSelect">Presets:</label>
              <select id="presetSelect">
                <option value="">-- Select Preset --</option>
                <option value="google">Google</option>
                <option value="classroom">Google Classroom</option>
                <option value="bing">Bing</option>
                <option value="nearpod">Nearpod</option>
                <option value="powerschool">PowerSchool</option>
                <option value="chrome">Chrome New Tab</option>
                <option value="edge">Edge New Tab</option>
              </select>
            </div>
            <div class="setting-buttons">
              <button id="applyBtn" class="btn-primary">Apply</button>
              <button id="resetBtn" class="btn-secondary">Reset</button>
            </div>
          </div>

          <div class="settings-section">
            <h3>Theme üé®</h3>
            <div class="setting-item">
              <label for="themeSelect">Select Theme:</label>
              <select id="themeSelect">
                <option value="original">Original (Dark Blue)</option>
                <option value="dark">Dark Theme</option>
                <option value="light">Light Theme</option>
                <option value="midnight">Midnight</option>
                <option value="ocean">Ocean</option>
                <option value="sunset">Sunset</option>
                <option value="forest">Forest</option>
                <option value="purple">Purple Dream</option>
                <option value="cyberpunk">Cyberpunk</option>
                <option value="matrix">Matrix</option>
                <option value="neon">Neon Lights</option>
                <option value="fire">Fire</option>
                <option value="ice">Ice</option>
                <option value="retro">Retro</option>
              </select>
            </div>
            <p style="font-size: 12px; color: var(--text-color); opacity: 0.8; margin-top: 8px;">
              ‚ú® Sidebar colors automatically match your selected theme!
            </p>
            <div class="setting-item">
              <label>
                <input type="checkbox" id="snowToggle" checked /> Enable Snow Effect
              </label>
            </div>
          </div>

          <div class="settings-section">
            <h3>Panic Button</h3>
            <div class="setting-item">
              <label for="hotkey-input">Panic Hotkey:</label>
              <input type="text" id="hotkey-input" placeholder="Press a key" readonly />
              <button id="change-hotkey-btn" class="btn-small">Change</button>
            </div>
            <div class="setting-item">
              <label for="redirect-url-input">Redirect URL:</label>
              <input type="text" id="redirect-url-input" placeholder="https://google.com" />
              <button id="change-URL-btn" class="btn-small">Change</button>
            </div>
          </div>

          <div class="settings-section">
            <h3>About Blank</h3>
            <div class="setting-item">
              <label>
                <input type="checkbox" id="aboutBlankToggle" /> Enable About:Blank Cloaking
              </label>
              <p style="font-size: 12px; color: var(--text-color); margin-top: 8px; opacity: 0.8;">
                When enabled, the site will open in an about:blank window to hide from browser history.
              </p>
            </div>
          </div>
        </div>
      </div>

      <div id="game-display" class="content" style="display:none;">
        <div class="game-play-area" id="game-play-area">
          <button class="fullscreen-btn" id="fullscreenBtn">Fullscreen</button>
          <iframe id="game-iframe" class="game-iframe" title="Game Display"></iframe>
        </div>
        <br />
        <button id="backToHomeGame">Back to Home</button>
      </div>
    </div>
  </div>

  <!-- Snow container -->
  <div id="snow-container"></div>

  <!-- Firebase SDK - MUST BE IN THIS ORDER -->
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>

  <!-- CRITICAL: Load scripts in EXACT ORDER -->
  <!-- 1. Console system -->
  <script src="others/assets/scripts/console.js"></script>

  <!-- 3. Games data -->
  <script src="others/assets/scripts/gms.js"></script>

  <!-- 4. Stats tracking -->
  <script src="others/assets/scripts/stats.js"></script>

  <!-- 4.5 NIMDA -->
  <script src="others/assets/scripts/admin.js"></script>
  
  <!-- 5. Sidebar navigation -->
  <script src="others/assets/js/sidebar.js"></script>

  <!-- 6. Main scripts (with Fingerprint ID protection integrated) -->
  <script src="scripts.js"></script>

  <!-- Homepage scroll functionality -->
  <script src="others/assets/scripts/homepage/homescroll.js"></script>

  <!-- Debug helper -->
  <script>
    console.log('Page loaded, checking for games data...');
    setTimeout(() => {
      console.log('Games available:', typeof games !== 'undefined' ? games.length : 'NOT LOADED');
      console.log('Carousel tracks found:', {
        top: !!document.getElementById('carousel-track-top'),
        bottom: !!document.getElementById('carousel-track-bottom')
      });
    }, 2000);
  </script>

  <!-- PROXY BROWSER FUNCTIONALITY -->
  <script>
    (function() {
      // ‚ö†Ô∏è CRITICAL: Configure your proxy URL here
      // Replace with your actual Scramjet proxy endpoint
      // Example: const PROXY_URL = 'https://your-domain.com/scramjet/';
      // If running locally: const PROXY_URL = '/scramjet/';
      const PROXY_URL = '/scramjet/'; // CHANGE THIS TO YOUR PROXY URL
      
      const proxyIframe = document.getElementById('proxyIframe');
      const urlInput = document.getElementById('proxyUrlInput');
      const goBtn = document.getElementById('proxyGoBtn');
      const backBtn = document.getElementById('proxyBack');
      const forwardBtn = document.getElementById('proxyForward');
      const reloadBtn = document.getElementById('proxyReload');
      const fullscreenBtn = document.getElementById('proxyFullscreen');
      const loadingIndicator = document.getElementById('loadingIndicator');
      const proxyWelcome = document.getElementById('proxyWelcome');

      // Load URL through proxy
      function loadProxyUrl(url) {
        if (!url || !url.trim()) return;
        
        let finalUrl = url.trim();

        // Hide welcome message
        if (proxyWelcome) {
          proxyWelcome.style.display = 'none';
        }

        // If not a URL, treat as search query
        if (!finalUrl.includes('.') && !finalUrl.startsWith('http')) {
          finalUrl = `https://duckduckgo.com/?q=${encodeURIComponent(finalUrl)}`;
        }

        // Add https if missing
        if (!finalUrl.startsWith('http://') && !finalUrl.startsWith('https://')) {
          finalUrl = 'https://' + finalUrl;
        }

        // Update URL bar
        urlInput.value = finalUrl;

        // Show loading
        if (loadingIndicator) {
          loadingIndicator.classList.add('active');
        }

        // Load through Scramjet proxy
        // The proxy will encode and handle the URL
        const proxiedUrl = PROXY_URL + encodeURIComponent(finalUrl);
        
        console.log('Loading proxied URL:', proxiedUrl);
        proxyIframe.src = proxiedUrl;

        // Hide loading after iframe loads
        proxyIframe.onload = function() {
          if (loadingIndicator) {
            loadingIndicator.classList.remove('active');
          }
        };

        // Fallback: hide loading after 3 seconds
        setTimeout(() => {
          if (loadingIndicator) {
            loadingIndicator.classList.remove('active');
          }
        }, 3000);
      }

      // Event listeners
      if (goBtn && urlInput) {
        goBtn.addEventListener('click', () => {
          const url = urlInput.value;
          if (url) loadProxyUrl(url);
        });

        urlInput.addEventListener('keypress', (e) => {
          if (e.key === 'Enter') {
            const url = urlInput.value;
            if (url) loadProxyUrl(url);
          }
        });
      }

      if (backBtn) {
        backBtn.addEventListener('click', () => {
          try {
            proxyIframe.contentWindow.history.back();
          } catch (e) {
            console.log('Cannot go back:', e);
          }
        });
      }

      if (forwardBtn) {
        forwardBtn.addEventListener('click', () => {
          try {
            proxyIframe.contentWindow.history.forward();
          } catch (e) {
            console.log('Cannot go forward:', e);
          }
        });
      }

      if (reloadBtn) {
        reloadBtn.addEventListener('click', () => {
          if (proxyIframe.src) {
            proxyIframe.src = proxyIframe.src;
          }
        });
      }

      if (fullscreenBtn) {
        fullscreenBtn.addEventListener('click', () => {
          if (proxyIframe.requestFullscreen) {
            proxyIframe.requestFullscreen();
          } else if (proxyIframe.webkitRequestFullscreen) {
            proxyIframe.webkitRequestFullscreen();
          } else if (proxyIframe.msRequestFullscreen) {
            proxyIframe.msRequestFullscreen();
          }
        });
      }

      // Focus input when search page is shown
      const searchLink = document.getElementById('searchLink');
      if (searchLink) {
        searchLink.addEventListener('click', () => {
          setTimeout(() => {
            if (urlInput) urlInput.focus();
          }, 100);
        });
      }

      console.log('Proxy browser initialized with URL:', PROXY_URL);
    })();
  </script>

  <!-- Iframe control functions -->
  <script>
    function reload() {
      var iframe = document.querySelector("iframe");
      if (iframe) {
        try {
          iframe.contentWindow.location.reload(true);
        } catch (error) {
          console.log('Reloading iframe via src...', error);
          iframe.src = iframe.src;
        }
      } else {
        console.warn('No iframe found to reload');
      }
    }

    function historyBack() {
      var iframe = document.querySelector("iframe");
      if (iframe) {
        try {
          iframe.contentWindow.history.back();
        } catch (error) {
          console.warn('Cannot navigate back in iframe:', error);
        }
      }
    }

    function historyForward() {
      var iframe = document.querySelector("iframe");
      if (iframe) {
        try {
          iframe.contentWindow.history.forward();
        } catch (error) {
          console.warn('Cannot navigate forward in iframe:', error);
        }
      }
    }
  </script>

</body>

</html>
